{"uid":"f515b7be2135a784","name":"Get User Info By Exist Username","fullName":"tests.soap.test_soap.TestSoapNiffler#test_get_user_info_by_exist_username","historyId":"3f74064417a8afd5d91365b2055db682","time":{"start":1770311992127,"stop":1770311992588,"duration":461},"status":"failed","statusMessage":"AssertionError: Incorrect value: \"None\". Expected value: None. Actual value: None","statusTrace":"self = <tests.soap.test_soap.TestSoapNiffler object at 0x7f33d1476fd0>\nsoap_session = <tools.sessions.SoapSession object at 0x7f33cf9b70e0>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', registration_url='http:/...th_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-auth', soap_address='http://localhost:8089/ws')\n\n    @allure.story(AllureStory.SOAP_GET_USER_INFO)\n    def test_get_user_info_by_exist_username(self, soap_session, envs):\n        response = soap_session.request(data=current_user_xml(envs.test_username))\n        user_data = current_user_result_operation(response.text)\n    \n        assert_status_code(response.status_code, HTTPStatus.OK)\n>       assert_userdata(user_data, envs.test_username)\n\ntests/soap/test_soap.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntools/assertions/soap.py:18: in assert_userdata\n    assert_exists(userdata['id'], 'users ID')\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ndates = None, name = 'users ID'\n\n    @allure.step(\"Check that {name} exists\")\n    def assert_exists(dates: Any, name: str):\n        logger.info(f'Check that \"{name}\" exists')\n>       assert dates, (\n               ^^^^^\n            f'Incorrect value: \"{dates}\". '\n            f'Expected value: {dates}. '\n            f'Actual value: {dates}'\n        )\nE       AssertionError: Incorrect value: \"None\". Expected value: None. Actual value: None\n\ntools/assertions/base.py:100: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S]  Verify Url","time":{"start":1770311981079,"stop":1770311981079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Base Url","time":{"start":1770311981079,"stop":1770311981079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Session Faker","time":{"start":1770311981080,"stop":1770311981081,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1770311981080,"stop":1770311981080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1770311981080,"stop":1770311981080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1770311981082,"stop":1770311981084,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Save Allure Environment File","time":{"start":1770311981084,"stop":1770311981084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[M] Soap Session","time":{"start":1770311992127,"stop":1770311992127,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Incorrect value: \"None\". Expected value: None. Actual value: None","statusTrace":"self = <tests.soap.test_soap.TestSoapNiffler object at 0x7f33d1476fd0>\nsoap_session = <tools.sessions.SoapSession object at 0x7f33cf9b70e0>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', registration_url='http:/...th_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-auth', soap_address='http://localhost:8089/ws')\n\n    @allure.story(AllureStory.SOAP_GET_USER_INFO)\n    def test_get_user_info_by_exist_username(self, soap_session, envs):\n        response = soap_session.request(data=current_user_xml(envs.test_username))\n        user_data = current_user_result_operation(response.text)\n    \n        assert_status_code(response.status_code, HTTPStatus.OK)\n>       assert_userdata(user_data, envs.test_username)\n\ntests/soap/test_soap.py:25: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntools/assertions/soap.py:18: in assert_userdata\n    assert_exists(userdata['id'], 'users ID')\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ndates = None, name = 'users ID'\n\n    @allure.step(\"Check that {name} exists\")\n    def assert_exists(dates: Any, name: str):\n        logger.info(f'Check that \"{name}\" exists')\n>       assert dates, (\n               ^^^^^\n            f'Incorrect value: \"{dates}\". '\n            f'Expected value: {dates}. '\n            f'Actual value: {dates}'\n        )\nE       AssertionError: Incorrect value: \"None\". Expected value: None. Actual value: None\n\ntools/assertions/base.py:100: AssertionError","steps":[{"name":"Soap session. Request method: POST, endpoint: http://localhost:8089/ws","time":{"start":1770311992571,"stop":1770311992571,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Parsing current user xml string","time":{"start":1770311992571,"stop":1770311992578,"duration":7},"status":"passed","steps":[{"name":"Extract text from xml element","time":{"start":1770311992571,"stop":1770311992572,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<Element '{niffler-userdata}user' at 0x7f33cf5cc180>"},{"name":"path","value":"'ns2:id'"},{"name":"namespaces","value":"{'soap': 'http://schemas.xmlsoap.org/soap/envelope/', 'ns2': 'niffler-userdata'}"},{"name":"default","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Extract text from xml element","time":{"start":1770311992572,"stop":1770311992572,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<Element '{niffler-userdata}user' at 0x7f33cf5cc180>"},{"name":"path","value":"'ns2:username'"},{"name":"namespaces","value":"{'soap': 'http://schemas.xmlsoap.org/soap/envelope/', 'ns2': 'niffler-userdata'}"},{"name":"default","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Extract text from xml element","time":{"start":1770311992572,"stop":1770311992572,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<Element '{niffler-userdata}user' at 0x7f33cf5cc180>"},{"name":"path","value":"'ns2:fullname'"},{"name":"namespaces","value":"{'soap': 'http://schemas.xmlsoap.org/soap/envelope/', 'ns2': 'niffler-userdata'}"},{"name":"default","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Extract text from xml element","time":{"start":1770311992578,"stop":1770311992578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<Element '{niffler-userdata}user' at 0x7f33cf5cc180>"},{"name":"path","value":"'ns2:currency'"},{"name":"namespaces","value":"{'soap': 'http://schemas.xmlsoap.org/soap/envelope/', 'ns2': 'niffler-userdata'}"},{"name":"default","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Extract text from xml element","time":{"start":1770311992578,"stop":1770311992578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"element","value":"<Element '{niffler-userdata}user' at 0x7f33cf5cc180>"},{"name":"path","value":"'ns2:friendshipStatus'"},{"name":"namespaces","value":"{'soap': 'http://schemas.xmlsoap.org/soap/envelope/', 'ns2': 'niffler-userdata'}"},{"name":"default","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"xml_str","value":"'<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"><SOAP-ENV:Header/><SOAP-ENV:Body><ns2:userResponse xmlns:ns2=\"niffler-userdata\"><ns2:user><ns2:username>niffler_st3</ns2:username><ns2:currency>RUB</ns2:currency><ns2:friendshipStatus>VOID</ns2:friendshipStatus></ns2:user></ns2:userResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>'"}],"stepsCount":5,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check that response status code equals to <HTTPStatus.OK: 200>","time":{"start":1770311992579,"stop":1770311992579,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"actual","value":"200"},{"name":"expected","value":"<HTTPStatus.OK: 200>"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check that 'username in SOAP message' equals to 'niffler_st3'","time":{"start":1770311992582,"stop":1770311992583,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"actual","value":"'niffler_st3'"},{"name":"expected","value":"'niffler_st3'"},{"name":"name","value":"'username in SOAP message'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check that 'users ID' exists","time":{"start":1770311992583,"stop":1770311992583,"duration":0},"status":"failed","statusMessage":"AssertionError: Incorrect value: \"None\". Expected value: None. Actual value: None\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/tools/assertions/base.py\", line 100, in assert_exists\n    assert dates, (\n           ^^^^^\n","steps":[],"attachments":[],"parameters":[{"name":"dates","value":"None"},{"name":"name","value":"'users ID'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"226ad4debe6d7e04","name":"log","source":"226ad4debe6d7e04.txt","type":"text/plain","size":477}],"parameters":[],"stepsCount":10,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"save_allure_environment_file::0","time":{"start":1770311994603,"stop":1770311994603,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Sending messages to Soap"},{"name":"tag","value":"SOAP"},{"name":"epic","value":"Niffler app"},{"name":"story","value":"Getting info about existing user by username"},{"name":"parentSuite","value":"tests.soap"},{"name":"suite","value":"test_soap"},{"name":"subSuite","value":"TestSoapNiffler"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"9900-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.soap.test_soap"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["SOAP"]},"source":"f515b7be2135a784.json","parameterValues":[]}