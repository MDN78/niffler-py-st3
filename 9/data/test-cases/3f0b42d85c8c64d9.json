{"uid":"3f0b42d85c8c64d9","name":"test_check_category_in_database[chromium-Lisatown-database]","fullName":"tests.ui.test_category_db.TestDatabase#test_check_category_in_database","historyId":"ae0b3d23af9d00241e374ac16e8150fb","time":{"start":1770311991390,"stop":1770311991390,"duration":0},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")","statusTrace":"browser = <Browser type=<BrowserType name=chromium executable_path=/home/runner/.cache/ms-playwright/chromium-1194/chrome-linux/chrome> version=141.0.7390.37>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', registration_url='http:/...th_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-auth', soap_address='http://localhost:8089/ws')\nauth_storage = PosixPath('/tmp/pytest-of-runner/pytest-0/popen-gw1/session0/niffler_user.json')\n\n    @pytest.fixture(scope=\"session\")\n    def initialize_browser_state(browser: Browser, envs: Envs, auth_storage):\n        \"\"\"Метод получение аутентификационного токена\"\"\"\n        context = browser.new_context()\n        page = context.new_page()\n    \n        registration_page = AuthPage(page=page)\n        registration_page.visit(envs.frontend_url)\n        registration_page.login(username=envs.test_username, password=envs.test_password)\n>       registration_page.spending_title_exists(\"History of Spendings\")\n\nfixtures/auth_fixtures.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napp/pages/auth_page.py:75: in spending_title_exists\n    self.spending_title.should_have_text(title)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <app.components.text.Text object at 0x7fb2f4264050>\ntext = 'History of Spendings', kwargs = {}\nstep = 'Checking that text \"spending title\" has text \"History of Spendings\"'\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/login?error'> selector='[id=\"spendings\"]>h2'>\n\n    def should_have_text(self, text: str, **kwargs) -> None:\n        step = f'Checking that {self.type_of} \"{self.name}\" has text \"{text}\"'\n        with allure.step(step):\n            locator = self.get_locator(**kwargs)\n            logger.info(step)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'History of Spendings'\nE           Actual value: None\nE           Error: element(s) not found \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\napp/components/base_component.py:39: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1770311981082,"stop":1770311981082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1770311981082,"stop":1770311981082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1770311981083,"stop":1770311981083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Session Faker","time":{"start":1770311981083,"stop":1770311981084,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1770311981083,"stop":1770311981083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1770311981085,"stop":1770311981087,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Playwright","time":{"start":1770311981088,"stop":1770311981523,"duration":435},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Save Allure Environment File","time":{"start":1770311981088,"stop":1770311981088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type Launch Args","time":{"start":1770311981088,"stop":1770311981088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type","time":{"start":1770311981523,"stop":1770311981523,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Connect Options","time":{"start":1770311981524,"stop":1770311981524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Launch Browser","time":{"start":1770311981524,"stop":1770311981524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser","time":{"start":1770311981524,"stop":1770311983222,"duration":1698},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Storage","time":{"start":1770311983222,"stop":1770311983277,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Tmp Path Factory","time":{"start":1770311983222,"stop":1770311983222,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Initialize Browser State","time":{"start":1770311983277,"stop":1770311991370,"duration":8093},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1202, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 915, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/fixtures/auth_fixtures.py\", line 28, in initialize_browser_state\n    registration_page.spending_title_exists(\"History of Spendings\")\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/pages/auth_page.py\", line 75, in spending_title_exists\n    self.spending_title.should_have_text(title)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"UI: open page","time":{"start":1770311983592,"stop":1770311985858,"duration":2266},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'http://frontend.niffler.dc'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"UI: login user","time":{"start":1770311985858,"stop":1770311986351,"duration":493},"status":"passed","steps":[{"name":"Fill input \"username\" to value \"niffler_st3\"","time":{"start":1770311985858,"stop":1770311985906,"duration":48},"status":"passed","steps":[{"name":"Getting locator name: \"input[name=username]\"","time":{"start":1770311985858,"stop":1770311985859,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill input \"password\" to value \"Qwdr!ss2\"","time":{"start":1770311985906,"stop":1770311985922,"duration":16},"status":"passed","steps":[{"name":"Getting locator name: \"input[name=password]\"","time":{"start":1770311985906,"stop":1770311985906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Clicking button with name \"submit\"","time":{"start":1770311985922,"stop":1770311986351,"duration":429},"status":"passed","steps":[{"name":"Getting locator name: \"button[type=submit]\"","time":{"start":1770311985922,"stop":1770311985923,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"username","value":"'niffler_st3'"},{"name":"password","value":"'Qwdr!ss2'"}],"stepsCount":6,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"UI: check spending page title text","time":{"start":1770311986351,"stop":1770311991369,"duration":5018},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/pages/auth_page.py\", line 75, in spending_title_exists\n    self.spending_title.should_have_text(title)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Checking that text \"spending title\" has text \"History of Spendings\"","time":{"start":1770311986351,"stop":1770311991368,"duration":5017},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Getting locator name: \"[id=\"spendings\"]>h2\"","time":{"start":1770311986351,"stop":1770311986352,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"title","value":"'History of Spendings'"}],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":11,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"[S] Spend Db","time":{"start":1770311991391,"stop":1770311991447,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"browser::0","time":{"start":1770311999056,"stop":1770311999091,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1770311999092,"stop":1770311999096,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"save_allure_environment_file::0","time":{"start":1770311999097,"stop":1770311999097,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Database"},{"name":"epic","value":"Niffler app"},{"name":"tag","value":"ACTIONS_DB"},{"name":"story","value":"Category"},{"name":"parentSuite","value":"tests.ui"},{"name":"suite","value":"test_category_db"},{"name":"subSuite","value":"TestDatabase"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"9894-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.test_category_db"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"category","value":"'database'"},{"name":"spends","value":"SpendAdd(amount=58, description='Lisatown', category=CategoryAdd(name='database', username=None, archived=None), spendDate='2025-11-09T15:05:28.759Z', currency='RUB')"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["ACTIONS_DB"]},"source":"3f0b42d85c8c64d9.json","parameterValues":["'chromium'","'database'","SpendAdd(amount=58, description='Lisatown', category=CategoryAdd(name='database', username=None, archived=None), spendDate='2025-11-09T15:05:28.759Z', currency='RUB')"]}