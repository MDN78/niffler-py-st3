{"uid":"7c7cef1382f8a53e","name":"test_add_same_category[chromium-school]","fullName":"tests.ui.test_profile_page.TestCategories#test_add_same_category","historyId":"67ddd1bea470c6402d0b61862455611d","time":{"start":1770311992647,"stop":1770311992647,"duration":0},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")","statusTrace":"browser = <Browser type=<BrowserType name=chromium executable_path=/home/runner/.cache/ms-playwright/chromium-1194/chrome-linux/chrome> version=141.0.7390.37>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', registration_url='http:/...th_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-auth', soap_address='http://localhost:8089/ws')\nauth_storage = PosixPath('/tmp/pytest-of-runner/pytest-0/popen-gw3/session0/niffler_user.json')\n\n    @pytest.fixture(scope=\"session\")\n    def initialize_browser_state(browser: Browser, envs: Envs, auth_storage):\n        \"\"\"Метод получение аутентификационного токена\"\"\"\n        context = browser.new_context()\n        page = context.new_page()\n    \n        registration_page = AuthPage(page=page)\n        registration_page.visit(envs.frontend_url)\n        registration_page.login(username=envs.test_username, password=envs.test_password)\n>       registration_page.spending_title_exists(\"History of Spendings\")\n\nfixtures/auth_fixtures.py:28: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \napp/pages/auth_page.py:75: in spending_title_exists\n    self.spending_title.should_have_text(title)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <app.components.text.Text object at 0x7f33cf9b46e0>\ntext = 'History of Spendings', kwargs = {}\nstep = 'Checking that text \"spending title\" has text \"History of Spendings\"'\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/login?error'> selector='[id=\"spendings\"]>h2'>\n\n    def should_have_text(self, text: str, **kwargs) -> None:\n        step = f'Checking that {self.type_of} \"{self.name}\" has text \"{text}\"'\n        with allure.step(step):\n            locator = self.get_locator(**kwargs)\n            logger.info(step)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'History of Spendings'\nE           Actual value: None\nE           Error: element(s) not found \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\napp/components/base_component.py:39: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S]  Verify Url","time":{"start":1770311981079,"stop":1770311981079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Base Url","time":{"start":1770311981079,"stop":1770311981079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Session Faker","time":{"start":1770311981080,"stop":1770311981081,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1770311981080,"stop":1770311981080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1770311981080,"stop":1770311981080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1770311981082,"stop":1770311981084,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Save Allure Environment File","time":{"start":1770311981084,"stop":1770311981084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Spend Db","time":{"start":1770311981085,"stop":1770311981262,"duration":177},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Playwright","time":{"start":1770311981263,"stop":1770311981683,"duration":420},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type Launch Args","time":{"start":1770311981263,"stop":1770311981263,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Connect Options","time":{"start":1770311981684,"stop":1770311981684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type","time":{"start":1770311981684,"stop":1770311981684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Launch Browser","time":{"start":1770311981684,"stop":1770311981684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser","time":{"start":1770311981684,"stop":1770311983227,"duration":1543},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Storage","time":{"start":1770311983227,"stop":1770311983235,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Tmp Path Factory","time":{"start":1770311983227,"stop":1770311983227,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Initialize Browser State","time":{"start":1770311983236,"stop":1770311991398,"duration":8162},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1202, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 915, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/fixtures/auth_fixtures.py\", line 28, in initialize_browser_state\n    registration_page.spending_title_exists(\"History of Spendings\")\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/pages/auth_page.py\", line 75, in spending_title_exists\n    self.spending_title.should_have_text(title)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"UI: open page","time":{"start":1770311983498,"stop":1770311985861,"duration":2363},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'http://frontend.niffler.dc'"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"UI: login user","time":{"start":1770311985861,"stop":1770311986354,"duration":493},"status":"passed","steps":[{"name":"Fill input \"username\" to value \"niffler_st3\"","time":{"start":1770311985861,"stop":1770311985906,"duration":45},"status":"passed","steps":[{"name":"Getting locator name: \"input[name=username]\"","time":{"start":1770311985861,"stop":1770311985861,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill input \"password\" to value \"Qwdr!ss2\"","time":{"start":1770311985906,"stop":1770311985918,"duration":12},"status":"passed","steps":[{"name":"Getting locator name: \"input[name=password]\"","time":{"start":1770311985906,"stop":1770311985907,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Clicking button with name \"submit\"","time":{"start":1770311985918,"stop":1770311986354,"duration":436},"status":"passed","steps":[{"name":"Getting locator name: \"button[type=submit]\"","time":{"start":1770311985918,"stop":1770311985918,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"username","value":"'niffler_st3'"},{"name":"password","value":"'Qwdr!ss2'"}],"stepsCount":6,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"UI: check spending page title text","time":{"start":1770311986354,"stop":1770311991397,"duration":5043},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/pages/auth_page.py\", line 75, in spending_title_exists\n    self.spending_title.should_have_text(title)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Checking that text \"spending title\" has text \"History of Spendings\"","time":{"start":1770311986354,"stop":1770311991395,"duration":5041},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'History of Spendings'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"[id=\\\"spendings\\\"]>h2\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/app/components/base_component.py\", line 39, in should_have_text\n    expect(locator).to_have_text(text)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_have_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Getting locator name: \"[id=\"spendings\"]>h2\"","time":{"start":1770311986354,"stop":1770311986360,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"title","value":"'History of Spendings'"}],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":11,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[{"name":"browser::0","time":{"start":1770311994556,"stop":1770311994597,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1770311994599,"stop":1770311994602,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"save_allure_environment_file::0","time":{"start":1770311994603,"stop":1770311994603,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"ACTIONS_UI"},{"name":"epic","value":"Niffler app"},{"name":"feature","value":"Category"},{"name":"story","value":"Category"},{"name":"parentSuite","value":"tests.ui"},{"name":"suite","value":"test_profile_page"},{"name":"subSuite","value":"TestCategories"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"9900-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.test_profile_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"category","value":"'school'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["ACTIONS_UI"]},"source":"7c7cef1382f8a53e.json","parameterValues":["'chromium'","'school'"]}